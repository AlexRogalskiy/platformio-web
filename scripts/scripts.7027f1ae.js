!function(){"use strict";angular.module("siteApp",["ngAnimate","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","viewhead","angulartics","angulartics.google.analytics","hljs","ngDisqus","relativeDate","ngTable","ngclipboard","duScroll"]).constant("siteConfig",{apiURL:9013===parseInt(location.port)?"http://localhost:8080":"http://api.platformio.org"})}(),function(){"use strict";function a(a,b){return{responseError:function(c){return 404===c.status&&b.path("/404"),a.reject(c)}}}function b(a,b,c,d){a.html5Mode(!0),c.setShortname("platformio"),d.interceptors.push("httpErrorInterceptor"),d.defaults.cache=!0,b.when("/",{templateUrl:"views/home.html",controller:"HomeController",controllerAs:"vm",resolve:{pioStats:["dataService",function(a){return a.getPioStats().$promise}]}}).when("/get-started/:gsType?",{templateUrl:"views/get_started.html",controller:"GetStartedController",controllerAs:"vm"}).when("/platforms/:platformName?",{templateUrl:"views/platforms.html",controller:"PlatformsController",controllerAs:"vm",resolve:{platformsList:["dataService",function(a){return a.getPlatforms().$promise}],packagesList:["dataService",function(a){return a.getPackages().$promise}],frameworksList:["dataService",function(a){return a.getFrameworks().$promise}]}}).when("/frameworks/:frameworkName?",{templateUrl:"views/frameworks.html",controller:"FrameworksController",controllerAs:"vm",resolve:{frameworksList:["dataService",function(a){return a.getFrameworks().$promise}],platformsList:["dataService",function(a){return a.getPlatforms().$promise}]}}).when("/boards",{templateUrl:"views/boards.html",controller:"BoardsController",controllerAs:"vm",resolve:{boardsList:["dataService",function(a){return a.getBoards().$promise}],platformsList:["dataService",function(a){return a.getPlatforms().$promise}],frameworksList:["dataService",function(a){return a.getFrameworks().$promise}]}}).when("/lib",{templateUrl:"views/lib_main.html",controller:"LibMainController",controllerAs:"vm",resolve:{libStats:["dataService",function(a){return a.getLibStats().$promise}]}}).when("/lib/search",{templateUrl:"views/lib_search.html",controller:"LibSearchController",controllerAs:"vm",resolve:{searchResult:["$location","dataService",function(a,b){var c=a.search();return b.getLibSearchResult({query:c.query,page:c.page?parseInt(c.page):1}).$promise}],frameworksList:["dataService",function(a){return a.getFrameworks().$promise}],platformsList:["dataService",function(a){return a.getPlatforms().$promise}]}}).when("/lib/examples",{templateUrl:"views/lib_examples.html",controller:"LibExamplesController",controllerAs:"vm",resolve:{searchResult:["$location","dataService",function(a,b){var c=a.search();return b.getLibExamples({query:c.query,page:c.page?parseInt(c.page):1}).$promise}],frameworksList:["dataService",function(a){return a.getFrameworks().$promise}],platformsList:["dataService",function(a){return a.getPlatforms().$promise}]}}).when("/lib/show/:libId/:libName/:activeTab?",{templateUrl:"views/lib_show.html",controller:"LibShowController",controllerAs:"vm",resolve:{libInfo:["$route","dataService",function(a,b){return b.getLibInfo(a.current.params.libId).$promise}]}}).when("/pricing",{templateUrl:"views/pricing.html",controller:"PricingController",controllerAs:"vm"}).when("/who-uses",{templateUrl:"views/who_uses.html"}).when("/platformio-ide",{templateUrl:"views/platformio-ide.html"}).when("/donate",{templateUrl:"views/donate.html"}).when("/404",{templateUrl:"views/404.html"}).otherwise({redirectTo:"/404"})}a.$inject=["$q","$location"],b.$inject=["$locationProvider","$routeProvider","$disqusProvider","$httpProvider"],angular.module("siteApp").factory("httpErrorInterceptor",a).config(b)}(),function(){"use strict";function a(a,b){function c(c){return a(b.apiURL+"/v2/lib/search",c).get()}function d(c){return a(b.apiURL+"/lib/examples",c).get()}function e(c){return a(b.apiURL+"/lib/info/"+c).get()}function f(c){return a(b.apiURL+"/lib/download/"+c).get()}function g(){return a(b.apiURL+"/lib/stats").get()}function h(){return a(b.apiURL+"/stats").get()}function i(){return a(b.apiURL+"/boards").query()}function j(){return a(b.apiURL+"/frameworks").query()}function k(){return a(b.apiURL+"/platforms").query()}function l(){return a(b.apiURL+"/packages").get()}function m(){return[{image:"http://docs.platformio.org/en/stable/_images/platformio-demo-wiring.gif",title:"Blink Project",icon:"lightbulb-o"},{image:"http://docs.platformio.org/en/stable/_images/platformio-demo-platforms.gif",title:"Platform Manager",icon:"laptop"},{image:"http://docs.platformio.org/en/stable/_images/platformio-demo-lib.gif",title:"Library Manager",icon:"code"}]}function n(){return[{image:"http://docs.platformio.org/en/stable/_images/ide-cloud9-init-project.png",title:"Cloud9",url:"http://docs.platformio.org/page/ide/cloud9.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-codeanywhere-init-project.png",title:"Codeanywhere (Cloud)",url:"http://docs.platformio.org/page/ide/codeanywhere.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-eclipseche-demo.png",title:"Eclipse Che (Cloud)",url:"http://docs.platformio.org/page/ide/eclipseche.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-platformio-eclipse.png",title:"Eclipse",url:"http://docs.platformio.org/page/ide/eclipse.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-sublime-text-deviot.gif",title:"Sublime Text",url:"http://docs.platformio.org/page/ide/sublimetext.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-vs-platformio-newproject-8.png",title:"Visual Studio",url:"http://docs.platformio.org/page/ide/visualstudio.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-platformio-clion.png",title:"CLion",url:"http://docs.platformio.org/page/ide/clion.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-platformio-netbeans.png",title:"NetBeans",url:"http://docs.platformio.org/page/ide/netbeans.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-platformio-codeblocks.png",title:"CodeBlocks",url:"http://docs.platformio.org/page/ide/codeblocks.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-platformio-qtcreator-7.png",title:"Qt Creator",url:"http://docs.platformio.org/page/ide/qtcreator.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-platformio-vim.png",title:"Vim",url:"http://docs.platformio.org/page/ide/vim.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-platformio-emacs.png",title:"Emacs",url:"http://docs.platformio.org/page/ide/emacs.html"},{image:"http://docs.platformio.org/en/stable/_images/ide-atom-platformio.png",title:"Atom",url:"http://docs.platformio.org/page/ide/atom.html"}]}return{getLibSearchResult:c,getLibExamples:d,getLibInfo:e,getLibDlUrl:f,getLibStats:g,getPioStats:h,getFrameworks:j,getPackages:l,getPlatforms:k,getBoards:i,getCLIDemos:m,getIDEDemos:n}}a.$inject=["$resource","siteConfig"],angular.module("siteApp").factory("dataService",a)}(),function(){"use strict";function a(a){function b(b){a.open({templateUrl:"views/lib_search_examples.html",controller:"LibModalSEController",controllerAs:"vm",size:"lg",resolve:{searchPath:function(){return b}}})}return{showSearchExamples:b,osType:function(){return-1!==navigator.appVersion.indexOf("Macintosh")?"Macintosh":-1!==navigator.appVersion.indexOf("Windows")?"Windows":-1!==navigator.appVersion.indexOf("Linux")?"Linux":""}()}}a.$inject=["$uibModal"],angular.module("siteApp").factory("siteUtils",a)}(),function(){"use strict";function a(a){function b(b,c,d){a(function(){if("undefined"!=typeof addthis){var a=b.lib.frameworks.join(" #"),d=b.lib.keywords.join(" #");a.length>0&&(a="#"+a),d.length>0&&(d="#"+d);var e={data_track_clickback:!1,data_track_addressbar:!1,data_ga_property:"UA-1768265-8",data_ga_social:!0},f={url:"http://platformio.org/lib/show/"+b.lib.id+"/"+b.lib.name,title:b.lib.name+" library"+(a?" for ":"")+a,description:b.lib.description+" "+d,templates:{twitter:"{{title}} {{url}} via @PlatformIO_Org "+d},url_transforms:{shorten:{twitter:"bitly"}}};addthis.init(),addthis.toolbox(c[0],e,f)}})}return{link:b,restrict:"A",transclude:!0,replace:!0,scope:{lib:"="},template:"<div ng-transclude></div>"}}a.$inject=["$timeout"],angular.module("siteApp").directive("addthisLib",a)}(),function(){"use strict";function a(a){function b(b,c,d){c.on("click",function(){a.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}return{link:b,restrict:"A"}}a.$inject=["$window"],angular.module("siteApp").directive("selectOnClick",a)}(),function(){"use strict";function a(){return function(a,b){switch(b){case"frequency":a=a/1e6+" MHz";break;case"size":a%1024==0?a/=1024:a=Math.round(a/1024*10)/10,a+=" kB"}return a}}angular.module("siteApp").filter("embeddedFormatter",a)}(),function(){"use strict";function a(){return function(a,b){var c=a;return angular.forEach(b,function(b){"name"in b&&"title"in b&&b.name===a&&(c=b.title)}),c}}angular.module("siteApp").filter("nameToTitle",a)}(),function(){"use strict";function a(){return function(a,b,c){if(isNaN(b))return a;if(b<=0)return"";if(a&&a.length>b){if(a=a.substring(0,b),c)for(;" "===a.charAt(a.length-1);)a=a.substr(0,a.length-1);else{var d=a.lastIndexOf(" ");-1!==d&&(a=a.substr(0,d))}return a+"â€¦"}return a}}angular.module("siteApp").filter("truncate",a)}(),function(){"use strict";function a(a,b,c,d){function e(a){return new RegExp(a).test(b.path())}var f=this;f.viewAutoScroll=!0,f.isNavBarCollapsed=!0,f.isRouteActive=e,f.isPhJSCrawler=-1!==c.navigator.userAgent.indexOf("PhantomJS"),f.siteUtils=d,a.$on("$routeChangeStart",function(a,b,c){if(f.viewAutoScroll=!0,c){var d=["GetStartedController","PlatformsController","FrameworksController","LibShowController"];angular.forEach(d,function(a){b.controller===a&&c.controller===a&&(f.viewAutoScroll=!1)})}})}a.$inject=["$rootScope","$location","$window","siteUtils"],angular.module("siteApp").controller("MainController",a)}(),function(){"use strict";function a(a){var b=this;b.stats={},angular.forEach(a,function(a,c){b.stats[c]=a.toLocaleString()})}a.$inject=["pioStats"],angular.module("siteApp").controller("HomeController",a)}(),function(){"use strict";function a(a,b,c,d,e,f){var g=this;g.gsType="ide",b.hasOwnProperty("gsType")&&(g.gsType=b.gsType),g.siteUtils=f,g.cliDemos=e.getCLIDemos(),g.cliDemoActive=0,g.ideDemos=e.getIDEDemos(),g.ideDemoActive=0,g.ideDemoInterval=5e3,g.slideHeight=c.innerHeight?Math.ceil(c.innerHeight/2):240,g.showIDEInstallation=a.search().hasOwnProperty("install")}a.$inject=["$location","$routeParams","$window","$analytics","dataService","siteUtils"],angular.module("siteApp").controller("GetStartedController",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(a){b.path("/platforms/"+a)}function g(a,b){var d=!1;return angular.forEach(c,function(c){c.name===b&&angular.forEach(c.packages,function(b){-1!==b.indexOf("framework-"+a)&&(d=!0)})}),d}var h=this;h.changePlatform=f,h.isCompatibleFramework=g,h.platforms=c,h.packages=d,h.frameworks=e,h.activeGroup=0,h.activePlatform=0,a.hasOwnProperty("platformName")&&(h.activeGroup=2,h.activePlatform=-1,angular.forEach(c,function(b,c){a.platformName===b.name&&(h.activeGroup=b.forDesktop?1:0,h.activePlatform=c)}))}a.$inject=["$routeParams","$location","platformsList","packagesList","frameworksList"],angular.module("siteApp").controller("PlatformsController",a)}(),function(){"use strict";function a(a,b,c,d){function e(a){b.path("/frameworks/"+a)}function f(a,b){var c=!1;return angular.forEach(d,function(d){d.name===a&&angular.forEach(d.packages,function(a){-1!==a.indexOf("framework-"+b)&&(c=!0)})}),c}var g=this;g.changeFramework=e,g.isCompatiblePlatform=f,g.active=0,g.frameworks=c,g.platforms=d,a.hasOwnProperty("frameworkName")&&angular.forEach(c,function(b,c){a.frameworkName===b.name&&(g.active=c)})}a.$inject=["$routeParams","$location","frameworksList","platformsList"],angular.module("siteApp").controller("FrameworksController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){l.shareUrl=d.protocol()+"://"+d.host(),80!==parseInt(d.port())&&(l.shareUrl+=":"+d.port()),l.shareUrl+="/boards?"+b(l.tableParams.url())}function k(a){var b=[];return angular.forEach("platforms"===a?h:i,function(c){"platforms"===a&&c.forDesktop||angular.isObject(c)&&"title"in c&&b.push({id:c.name,title:c.title})}),b}var l=this;l.shareUrl="",l.shareInputShown=!1,l.platforms=h,l.frameworks=i,l.getFilterData=k,l.updateShareUrl=j,l.tableParams=new e(angular.extend({page:1,count:15,sorting:{name:"asc"}},d.search()),{counts:[15,30,50,100,1e3],dataset:g}),f.onAfterReloadData(j,a,l.tableParams)}a.$inject=["$scope","$httpParamSerializerJQLike","$filter","$location","NgTableParams","ngTableEventsChannel","boardsList","platformsList","frameworksList"],angular.module("siteApp").controller("BoardsController",a)}(),function(){"use strict";function a(a,b){function c(){a.url("/lib/search?query="+encodeURIComponent(d.searchQuery))}var d=this;d.submitSearchForm=c,d.searchQuery="",d.stats=b,d.searchPath="/lib/search",d.searchInputPlaceholder="Search for library ..."}a.$inject=["$location","libStats"],angular.module("siteApp").controller("LibMainController",a)}(),function(){"use strict";function a(a,b,c){function d(c){a.path(e.searchPath+"?query="+c),b.close()}var e=this;e.searchPath=c,e.search=d}a.$inject=["$location","$uibModalInstance","searchPath"],angular.module("siteApp").controller("LibModalSEController",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){a.search({query:encodeURIComponent(g.searchQuery),page:g.searchResult.page})}var g=this,h=a.search();g.siteUtils=b,g.frameworks=d,g.platforms=e,g.searchQuery="",g.searchResult=c,g.meta=function(){var a={description:[],keywords:[]};return angular.forEach(g.searchResult.items,function(b){a.description.push(b.name),a.keywords=a.keywords.concat(b.name.split("-")),angular.forEach(["frameworks","platforms"],function(c){angular.forEach(b[c],function(b){a.description.push(b.title),a.keywords=a.keywords.concat([b.name,b.title])})})}),angular.forEach(["description","keywords"],function(b){a[b]=a[b].filter(function(a,b,c){return c.indexOf(a)===b})}),a.description=a.description.join(", "),a.keywords=a.keywords.join(", "),a}(),g.submitSearchForm=f,g.pageChanged=f,g.searchPath="/lib/search",g.searchInputPlaceholder="Search for library ...",h.query&&h.query.length&&(g.searchQuery=decodeURIComponent(h.query))}a.$inject=["$location","siteUtils","searchResult","frameworksList","platformsList"],angular.module("siteApp").controller("LibSearchController",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){d.eventTrack("Download",{category:"Library",label:"#"+j.lib.id+" "+j.lib.name}),e.getLibDlUrl(j.lib.id).$promise.then(function(b){a.location.href=b.url+"?filename="+[j.lib.name.replace(/[\s]+/g,"-"),j.lib.version.name,j.lib.id].join("_")})}function h(b){if(d.eventTrack("Edit",{category:"Library",label:"#"+j.lib.id+" "+j.lib.name}),0===b.indexOf("https://raw.githubusercontent.com")){var c=b.match(new RegExp("content.com/([^/]+/[^/]+)/(.+)$"));if(c)return void(a.location.href="https://github.com/"+c[1]+"/blob/"+c[2])}a.location.href=b}function i(a){j.activeTab!==k.indexOf(a)&&b.url("/lib/show/"+c.libId+"/"+c.libName+"/"+a)}var j=this,k=["examples","installation","headers","manifest","discussion"];j.lib=f,j.meta=function(){var a={title:j.lib.name,keywords:j.lib.keywords.slice(0),description:j.lib.description},b=[];angular.forEach(j.lib.authors,function(a){b.push(a.name)}),b.length&&(a.title+=" by "+b.join(", "));var c=[];return angular.forEach(["frameworks","platforms"],function(a){angular.forEach(j.lib[a],function(a){c.push(a.title)})}),a.keywords=a.keywords.concat(c),a.keywords=a.keywords.concat(j.lib.headers),a.keywords=a.keywords.join(", "),a}(),j.examples=function(){var a=[];return j.lib.examples.length?(angular.forEach(j.lib.examples,function(b){var c=b.split("/");a.push({url:b,name:c[c.length-1]})}),a):a}(),j.activeTab=function(){if(!c.hasOwnProperty("activeTab"))return 0;var a=k.indexOf(c.activeTab);return-1!==a?a:0}(),j.currentExample={},j.showAllVersions=!1,j.manifestUrl="",j.downloadLib=g,j.editLibraryConf=h,j.changeTab=i,"discussion"!==c.activeTab&&0===b.hash().indexOf("comment-")&&b.url("/lib/show/"+c.libId+"/"+c.libName+"/discussion#"+b.hash()),j.examples.length&&(j.currentExample=j.examples[0]);var l=b.search();l.file&&angular.forEach(j.examples,function(a){if(a.name===l.file)return void(j.currentExample=a)})}a.$inject=["$window","$location","$routeParams","$analytics","dataService","libInfo"],angular.module("siteApp").controller("LibShowController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){a.search({query:encodeURIComponent(m.searchQuery),page:m.searchResult.page})}function k(a){var e,f;a.showFullCode=!1,a.shortCode="Loading...",e=c.get(a.url),e||(f=d.defer(),b.get(a.url,{cache:c,transformResponse:function(a,b){return a}}).success(function(a){f.resolve(a)}).error(function(a){console.log(a),f.resolve("Can't load an example code")}),e=f.promise),d.when(e).then(function(b){angular.isArray(b)?b=b[1]:angular.isObject(b)&&(b=b.data),b=b.replace(/(?:\s*\/\*[\s\S]+?\*\/\s*|\s*\/\/[\s\S]+?$\s)/m,""),a.shortCode=b.split("\n",20).splice(0,20).join("\n")})}function l(a,b,c){return c.indexOf(a)===b}var m=this,n=a.search();m.siteUtils=f,m.frameworks=h,m.platforms=i,m.searchQuery="",m.searchResult=g,m.meta=function(){var a={description:[],keywords:[]};return angular.forEach(m.searchResult.items,function(b){a.description=a.description.concat([b.lib.name,b.name]),a.keywords=a.keywords.concat(b.name.split(/[\-\_\.]/))}),a.description=a.description.filter(l),a.keywords=a.keywords.filter(l),a.description=a.description.join(", "),a.keywords=a.keywords.join(", "),a}(),m.submitSearchForm=j,m.pageChanged=j,m.searchPath="/lib/examples",m.searchInputPlaceholder="Search for example ...",n.query&&n.query.length&&(m.searchQuery=decodeURIComponent(n.query)),angular.forEach(m.searchResult.items,function(a){try{k(a)}catch(a){console.log(a)}})}a.$inject=["$location","$http","$templateCache","$q","dataService","siteUtils","searchResult","frameworksList","platformsList"],angular.module("siteApp").controller("LibExamplesController",a)}(),function(){"use strict";function a(){function a(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}function b(b){c.currentPeriod=b||("Y"===c.currentPeriod?"M":"Y");var d=a("coupon"),e=0;d&&-1!==d.indexOf("OFF")&&(e=parseInt(d.substr(d.indexOf("OFF")+3))),c.rates=c.baseRates[c.currentPeriod];for(var f in c.rates)if(c.rates.hasOwnProperty(f)){var g=c.rates[f].price;e>0&&e<=100&&(g-=g*e/100),c.rates[f].whole=Math.floor(g),c.rates[f].cents=parseInt(100*(g-Math.floor(g))),c.rates[f].url="https://sites.fastspring.com/platformio/",c.rates[f].url+="instant/platformio-plus-"+f+"-","Y"===c.currentPeriod?c.rates[f].url+="annually":c.rates[f].url+="monthly",d&&(c.rates[f].url+="?coupon="+d)}}var c=this;c.baseRates={M:{basic:{price:12.99,whole:12,cents:99},professional:{price:124.99,whole:124,cents:99}},Y:{basic:{price:9.99,whole:9,cents:99},professional:{price:99.99,whole:99,cents:99}}},c.currentPeriod="Y",c.rates=null,c.changeRate=b,b("Y")}angular.module("siteApp").controller("PricingController",a)}();